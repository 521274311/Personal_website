<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Title</title>
    <script src="/static/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/src-noconflict/ext-language_tools.js" type="text/javascript"></script>
    <script src="/static/js/jquery-3.4.1.min.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <link href="/static/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="/static/css/bootstrap-theme.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!--<div class="container">-->
<div class="container-fluid">
    <input type="hidden" id="lgg" value="python">
    <div style="height:300px;" id="editorDiv"></div>
    <button id="run" class="btn btn-default btn-info">Run</button>
    <div class="pre-scrollable" id="result">

    </div>
</div>



<script src="/static/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="/static/src-noconflict/ext-language_tools.js" type="text/javascript"></script>
<script src="/static/js/init.js" type="text/javascript"></script>

<script>
    var editor = ace.edit("editorDiv");
    //设置编辑器样式，对应theme-*.js文件
    editor.setTheme("ace/theme/twilight");
    //设置代码语言，对应mode-*.js文件
    editor.session.setMode("ace/mode/python");
    //设置打印线是否显示
    editor.setShowPrintMargin(false);
    //设置是否只读
    // editor.setReadOnly(true);
    editor.setFontSize(16);

    //以下部分是设置输入代码提示的，如果不需要可以不用引用ext-language_tools.js
    ace.require("ace/ext/language_tools");
    editor.setOptions({
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true
    });

    $('#run').click(function () {
        var code = editor.getValue();
        var url = '/programs/run_'+$('#lgg').val();
        init_token();
        $.ajax ({
            type : 'POST',
            url : url,
            data : { code : code},
            dataType : 'json',
            success : function (data) {
                if($('#result').length > 0) $('#result').empty();
                $('#result').append(data.run_result)
            },
            error : function (err, errinfo, err3) {
                console.log(err);
            }
        });
    });
</script>
</body>
</html>